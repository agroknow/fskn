define(["js/core/coursera","backbone","underscore","jquery","pages/home/front/frontSearchBanner.html","js/models/frontdata","js/json/searchBanners","pages/home/front/frontAutocomplete","js/lib/placeholder"],function(e,t,r,n,o,i,a,s){var u=t.View.extend({events:{"submit form.coursera-front-search-banner-form":"searchSubmit"},initialize:function(){var e=this;this.bind("view:closing",function(){window.clearInterval(e.joinTimer)}),this.bind("view:appended",function(){e.$("input[placeholder]").placeholder(),e.$("#coursera-front-search-banner-input").focus()})},render:function(){var t=this,n=Math.floor(Math.random()*a.length),u=a[n];t.$el.append(o({config:e.config,searchBanner:u})),new s({el:this.$("#coursera-front-search-banner-input")}).render(),i.singletonRead().done(function(e){t.$(".coursera-front-search-banner-courses-count").text(e.get("total_courses")),t.$(".coursera-front-search-banner-universities-count").text(e.get("total_universities")),t.$(".coursera-front-search-banner-hide2").show();var r=e.get("signup_stats");t.startNum=r.total,t.joinRate=r.rate,t.startDate=new Date(1e3*r.updated)}).always(function(){t.startNum||(t.startNum=1001956,t.joinRate=.1123,t.startDate=new Date(1344451016235)),t.joinTimer=window.setInterval(r.bind(t.updateJoinNum,t),1e4),t.updateJoinNum()})},searchSubmit:function(t){t.preventDefault();var r=this.$("#coursera-front-search-banner-input");e.tracker.push({key:"user.coursera.front.search",val:r.val()}),e.router.navigate(e.config.dir.home+"courses?search="+r.val(),{trigger:!0})},updateJoinNum:function(){var e=this,t=((new Date).getTime()-e.startDate.getTime())/1e3,r=Math.ceil(t*e.joinRate),n=e.startNum+r;n=(""+n).replace(/(\d)(?=(\d{3})+$)/g,"$1,"),this.$(".coursera-front-search-banner-join").show(),this.$(".coursera-front-search-banner-students-count").text(n)}});return u});